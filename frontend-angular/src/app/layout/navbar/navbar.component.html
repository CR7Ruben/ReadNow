<nav class="rn-navbar">
  <div class="rn-left">
    <img src="assets/ReadNowLogo1.png" alt="ReadNow Logo">
    <span>Read<b class="now">Now</b></span>
  </div>

  <div class="rn-center">
  <a routerLink="" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Inicio</a>
  <a routerLink="/categorias" routerLinkActive="active">Categor√≠as</a>
  <a routerLink="/premium" routerLinkActive="active">Premium</a>
</div>


  <div class="rn-right">
    <button class="user-btn" (click)="toggleLogin()">üë§</button>

    <!-- Login Float -->
    <div class="login-float" *ngIf="showLogin">
      <form [formGroup]="form" (ngSubmit)="login()">

        <div class="form-group">
          <label for="loginEmail">Correo Electr√≥nico</label>
          <input formControlName="email" id="loginEmail" type="email" placeholder="tu@email.com"
            [class.invalid]="form.get('email')?.invalid && form.get('email')?.touched">
          <div class="error-message" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
            Por favor ingresa un correo v√°lido
          </div>
        </div>

        <div class="form-group password-group">
          <label for="loginPassword">Contrase√±a</label>
          <div class="password-input-wrapper">
            <input formControlName="password" id="loginPassword"
              [type]="showLoginPassword ? 'text' : 'password'"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              [class.invalid]="form.get('password')?.invalid && form.get('password')?.touched">
          </div>
          
        </div>

        <button type="submit" [disabled]="form.invalid">Entrar</button>

        <div class="register-link">
          ¬øNo tienes cuenta?
          <a (click)="showRegisterModal()" class="register-text">Crea una aqu√≠</a>
        </div>
      </form>
    </div>
  </div>
</nav>

<!-- Modal de Registro -->
<div class="modal-overlay" *ngIf="showRegister" (click)="closeRegisterModal($event)">
  <div class="register-modal">
    <button class="close-btn" (click)="closeRegisterModal()">&times;</button>

    <h2 class="modal-title">Crear Cuenta</h2>
    <p class="modal-subtitle">√önete a ReadNow y descubre miles de libros</p>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="register-form">
      <div class="form-group">
        <label for="email">Correo Electr√≥nico</label>
        <input formControlName="email" id="email" type="email" placeholder="tu@email.com"
          [class.invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
        <div class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          Por favor ingresa un correo v√°lido
        </div>
      </div>

      <div class="form-group">
        <label for="username">Nombre de Usuario</label>
        <input formControlName="username" id="username" type="text" placeholder="Usuario123"
          [class.invalid]="registerForm.get('username')?.invalid && registerForm.get('username')?.touched">
        <div class="error-message" *ngIf="registerForm.get('username')?.errors?.['minlength'] && registerForm.get('username')?.touched">
          El usuario debe tener al menos 8 caracteres
        </div>
        <div class="error-message" *ngIf="registerForm.get('username')?.errors?.['required'] && registerForm.get('username')?.touched">
          El usuario es obligatorio
        </div>
      </div>

      <div class="form-group password-group">
        <label for="password">Contrase√±a</label>
        <div class="password-input-wrapper">
          <input formControlName="password" id="password"
            [type]="showRegisterPassword ? 'text' : 'password'" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            [class.invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
        </div>
        <div class="password-requirements">
          <ul>
            <li [class.valid]="hasMinLength">‚úì M√≠nimo 12 caracteres</li>
            <li [class.valid]="hasUpperCase">‚úì Al menos una may√∫scula</li>
            <li [class.valid]="hasLowerCase">‚úì Al menos una min√∫scula</li>
            <li [class.valid]="hasNumber">‚úì Al menos un n√∫mero</li>
            <li [class.valid]="hasSpecialChar">‚úì Al menos un car√°cter especial (&#64;$!%*?&)</li>
          </ul>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmar Contrase√±a</label>
        <input formControlName="confirmPassword" id="confirmPassword"
          [type]="showRegisterPassword ? 'text' : 'password'" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          [class.invalid]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
        <div class="error-message" *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch'] && registerForm.get('confirmPassword')?.touched">
          Las contrase√±as no coinciden
        </div>
      </div>

      <button type="submit" class="register-btn" [disabled]="registerForm.invalid">
        Crear Cuenta
      </button>
    </form>

    <div class="login-link">
      ¬øYa tienes cuenta?
      <a (click)="switchToLogin()" class="login-text">Inicia sesi√≥n aqu√≠</a>
    </div>
  </div>
</div>
