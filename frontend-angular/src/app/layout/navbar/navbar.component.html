<nav class="rn-navbar">
  <!-- IZQUIERDA -->
  <div class="rn-left">
    <img src="assets/ReadNowLogo1.png" alt="ReadNow Logo">
    <span>Read<b class="now">Now</b></span>
  </div>

  <!-- CENTRO -->
  <div class="rn-center">
    <a routerLink="" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
      Inicio
    </a>
    <a routerLink="/categorias" routerLinkActive="active">
      CategorÃ­as
    </a>
    <a routerLink="/premium" routerLinkActive="active">
      Premium
    </a>
  </div>

  <!-- BADGE PREMIUM -->
  <span *ngIf="auth.isPremium()" class="premium-badge">
    ðŸ‘‘ PREMIUM
  </span>

  <!-- DERECHA -->
  <div class="rn-right">

    <!-- BOTÃ“N USUARIO -->
    <button class="user-btn" (click)="toggleLogin()">ðŸ‘¤</button>

    <!-- LOGIN FLOAT -->
    <div class="login-float" *ngIf="showLogin">
      <form [formGroup]="form" (ngSubmit)="login()">

        <!-- EMAIL -->
        <div class="form-group">
          <label for="loginEmail">Correo ElectrÃ³nico</label>
          <input id="loginEmail" type="email" formControlName="email" placeholder="tu@email.com"
            [class.invalid]="form.get('email')?.invalid && form.get('email')?.touched">
          <div class="error-message" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
            Ingresa un correo vÃ¡lido
          </div>
        </div>

        <!-- PASSWORD -->
        <div class="form-group">
          <label for="loginPassword">ContraseÃ±a</label>

          <div class="password-input-wrapper">
            <input id="loginPassword" [type]="showLoginPassword ? 'text' : 'password'" formControlName="password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" [class.invalid]="form.get('password')?.invalid && form.get('password')?.touched">

            <span class="toggle-password" (click)="showLoginPassword = !showLoginPassword">
              {{ showLoginPassword ? 'ðŸ™ˆ' : 'ðŸ‘€' }}
            </span>
          </div>
        </div>

        <button type="submit" [disabled]="form.invalid">
          Entrar
        </button>

        <div class="register-link">
          Â¿No tienes cuenta?
          <span (click)="showRegisterModal()" class="register-text">
            Crea una aquÃ­
          </span>
        </div>
      </form>
    </div>
  </div>
</nav>

<!-- ================= REGISTRO MODAL ================= -->

<div class="modal-overlay" *ngIf="showRegister" (click)="closeRegisterModal($event)">
  <div class="register-modal">

    <button class="close-btn" (click)="closeRegisterModal()">
      &times;
    </button>

    <h2 class="modal-title">Crear Cuenta</h2>
    <p class="modal-subtitle">
      Ãšnete a ReadNow y descubre miles de libros
    </p>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="register-form">

      <!-- EMAIL -->
      <div class="form-group">
        <label for="email">Correo ElectrÃ³nico</label>
        <input id="email" type="email" formControlName="email" placeholder="tu@email.com"
          [class.invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
        <div class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          Ingresa un correo vÃ¡lido
        </div>
      </div>

      <!-- USERNAME -->
      <div class="form-group">
        <label for="username">Nombre de Usuario</label>
        <input id="username" type="text" formControlName="username" placeholder="Usuario123"
          [class.invalid]="registerForm.get('username')?.invalid && registerForm.get('username')?.touched">
        <div class="error-message"
          *ngIf="registerForm.get('username')?.errors?.['minlength'] && registerForm.get('username')?.touched">
          MÃ­nimo 8 caracteres
        </div>
      </div>

      <!-- PASSWORD -->
      <div class="form-group">
        <label for="password">ContraseÃ±a</label>

        <div class="password-input-wrapper">
          <input id="password" [type]="showRegisterPassword ? 'text' : 'password'" formControlName="password"
            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
            [class.invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">

          <span class="toggle-password" (click)="showRegisterPassword = !showRegisterPassword">
            {{ showRegisterPassword ? 'ðŸ™ˆ' : 'ðŸ‘€' }}
          </span>
        </div>

        <!-- REQUISITOS -->
        <!-- BARRA DE FUERZA -->
        <div class="password-strength-wrapper" *ngIf="registerForm.get('password')?.value">

          <div class="strength-bar">
            <div class="strength-fill" [style.width.%]="passwordStrengthPercentage" [ngClass]="strengthClass">
            </div>
          </div>

          <span class="strength-text" [ngClass]="strengthClass">
            Seguridad: {{ passwordStrengthLabel }}
          </span>

        </div>
      </div>

      <!-- CONFIRM PASSWORD -->
      <div class="form-group">
        <label for="confirmPassword">Confirmar ContraseÃ±a</label>
        <input id="confirmPassword" [type]="showRegisterPassword ? 'text' : 'password'"
          formControlName="confirmPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
          [class.invalid]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
        <div class="error-message" *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">
          Las contraseÃ±as no coinciden
        </div>
      </div>

      <button type="submit" class="register-btn" [disabled]="registerForm.invalid">
        Crear Cuenta
      </button>

    </form>

    <div class="login-link">
      Â¿Ya tienes cuenta?
      <span (click)="switchToLogin()" class="login-text">
        Inicia sesiÃ³n aquÃ­
      </span>
    </div>

  </div>
</div>